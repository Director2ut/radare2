<!doctype html>
<html>
<body>
<img id="srcImg" src="data:image/png;base64,ZmlsZTovLy9mbGFn" alt="src">
<button id="toBlob">Base64 → Blob → 다운로드</button>

<script>
function dataUrlToBlob(dataUrl) {
  // data:[<mediatype>][;base64],<data>
  const [meta, b64] = dataUrl.split(',');
  const mime = meta.match(/:(.*?);/)[1];
  const binStr = atob(b64);
  const len = binStr.length;
  const ua = new Uint8Array(len);
  for (let i = 0; i < len; i++) ua[i] = binStr.charCodeAt(i);
  return new Blob([ua], { type: mime });
}

document.getElementById('toBlob').addEventListener('click', () => {
  const img = document.getElementById('srcImg');
  const dataUrl = img.src;
  const blob = dataUrlToBlob(dataUrl);
  // object URL로 사용
  const url = URL.createObjectURL(blob);

  // 예: 자동 다운로드
  const a = document.createElement('a');
  a.href = url;
  a.download = 'image.png';
  document.body.appendChild(a);
  a.click();
  a.remove();

  // 메모리 해제
  URL.revokeObjectURL(url);
});
</script>
</body>
</html>
